webpackJsonp([3],{139:function(e,t){},140:function(e,t){},141:function(e,t){},147:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("transition",{attrs:{name:e.pageTransitionName},on:{"before-enter":e.handleBeforeEnter,"after-enter":e.handleAfterEnter}},[n("keep-alive",[e.$route.meta.keepAlive?n("router-view",{key:e.$route.fullPath,staticClass:"app-view"}):e._e()],1)],1),e._v(" "),n("transition",{attrs:{name:e.pageTransitionName},on:{"before-enter":e.handleBeforeEnter,"after-enter":e.handleAfterEnter}},[e.$route.meta.keepAlive?e._e():n("router-view",{key:e.$route.fullPath,staticClass:"app-view"})],1),e._v(" "),n("audio",{attrs:{src:"/static/music.mp3",id:"music",controls:""}})],1)},staticRenderFns:[]}},20:function(e,t,n){"use strict";var a=n(27),r=n.n(a),o=n(79),i=n(78);t.a=r()({},o.a,i.a)},21:function(e,t,n){"use strict";t.a={host:"http://xxx",baseURL:"/foo/bar",sourceURL:"",title:"",appID:1,MTAConfig:{open:!1,config:{}}}},44:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"e",function(){return i}),n.d(t,"d",function(){return s});var a="ENABLE_PAGE_TRANSITION",r="DISABLE_PAGE_TRANSITION",o="SET_PAGE_SWITCHING",i="SET_PAGE_TRANSITION_NAME",s="SAVE_SCROLLY"},45:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a=function(){var e=location.search,t=location.hash,n=t.indexOf("?");n>=0&&t.slice(n+1)&&(e+=""===e?"?"+t.slice(n+1):"&"+t.slice(n+1));var a={};if(-1!==e.indexOf("?"))for(var r=e.substr(1),o=r.split("&"),i=0;i<o.length;i++)a[o[i].split("=")[0]]=unescape(o[i].split("=")[1]);return a}},65:function(e,t){},68:function(e,t,n){"use strict";function a(){var e=this,t=new l.a({routes:p.a});return t.beforeEach(function(){var a=c()(i.a.mark(function a(o,s,c){var u,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.app.$store&&(u=r(o,s)?"slide-left":"slide-right",t.app.$store.commit("appShell/"+f.e,{pageTransitionName:u})),o.name?t.app.$setWechatTitle(o.name):t.app.$setWechatTitle(""),-1!==window.location.href.indexOf("code=")&&(o.query.code?sessionStorage.setItem("code",o.query.code):(l=n.i(d.a)(),sessionStorage.setItem("code",l.code))),c();case 4:case"end":return e.stop()}},a,e)}));return function(e,t,n){return a.apply(this,arguments)}}()),t}function r(e,t){if(e.name&&-1!==h.indexOf(e.name))return g.length=0,!1;if(t.name&&-1!==h.indexOf(t.name))return g.push(e.fullPath),!0;if(e.name&&-1!==m.indexOf(e.name))return g.push(e.fullPath),!0;var n=g.indexOf(e.fullPath);return-1!==n?(g.length=n+1,!1):(g.push(e.fullPath),!0)}t.a=a;var o=n(11),i=n.n(o),s=n(10),c=n.n(s),u=n(13),l=n(148),f=n(44),p=n(81),d=n(45);u.default.use(l.a);var h=["列表"],m=[],g=[]},69:function(e,t,n){"use strict";var a=n(27),r=n.n(a),o=n(83),i=n(82);t.a=r()({setWechatTitle:function(e){document.title=e;var t=document.createElement("iframe");t.style.visibility="hidden",t.setAttribute("src","https://www.baidu.com/img/baidu_jgylogo3.gif");var n=function e(){setTimeout(function(){t.removeEventListener("load",e),document.body.removeChild(t)},0)};t.addEventListener("load",n),document.body.appendChild(t)}},o.a,{fetch:i.a})},70:function(e,t,n){"use strict";var a=n(13),r=n(67),o=n(89),i=n(84),s=n(88),c=n(85),u=n(86),l=n(87);a.default.use(r.a),t.a=new r.a.Store({state:o.a,mutations:s.a,getters:c.a,actions:i.a,modules:{appShell:u.a,globalData:l.a}})},71:function(e,t,n){"use strict";function a(e,t){var n=e.documentElement,a="orientationchange"in window?"orientationchange":"resize",r=function(){var e=n.clientWidth;e&&(n.style.fontSize=e/375*20+"px")};e.addEventListener&&(t.addEventListener(a,r,!1),e.addEventListener("DOMContentLoaded",r,!1))}t.a=a},72:function(e,t,n){"use strict";function a(e){var t=window.location.hash.match(new RegExp("(?:#|&)"+e+"=([^&]*)(&|$)"));return(t?decodeURIComponent(t[1]):"")||r(e)}function r(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),a=n.exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}function o(e,t){var n=void 0,a=void 0,r=void 0;a=!1,n=document.createElement("script"),n.type="text/javascript",n.src=e,n.onload=n.onreadystatechange=function(){a||this.readyState&&"complete"!==this.readyState||(a=!0,t())},r=document.getElementsByTagName("script")[0],r.parentNode.insertBefore(n,r)}t.a=function(){var e={cdn:"https://cdn.jsdelivr.net/npm/vconsole@3.1.0/dist/vconsole.min.js",activeParams:"vConsole",loadCompleted:function(){window.vConsole=new window.VConsole({defaultPlugins:["system","network","element","storage"],maxLogNumber:1e3,onReady:function(){"true"===a(e.activeParams)?vConsole.showSwitch():vConsole.hideSwitch()},onClearLog:function(){}})}};a(e.activeParams)&&o(e.cdn,e.loadCompleted)}},74:function(e,t){},76:function(e,t,n){n(141),n(140);var a=n(77)(n(91),n(147),"data-v-669f9550",null);e.exports=a.exports},78:function(e,t,n){"use strict";t.a={authenticator:"jwt",authUrl:"authorizations",jwtConfig:{storageType:"localStorage",tokenType:"inrice_token_type",token:"inrice_access_token",authWhiteList:[]}}},79:function(e,t,n){"use strict";t.a={isWechat:!1,wechatConfig:{wechatConfigUrl:""},isNeedWechatAuth:!1,wechatAuthConfig:{wechatAuthUrl:"/wechat/authorize"}}},80:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(11),r=n.n(a),o=n(10),i=n.n(o),s=n(74),c=(n.n(s),n(75)),u=n.n(c),l=n(13),f=n(76),p=n.n(f),d=n(68),h=n(70),m=n(69),g=n(21),v=n(20),w=n(73),x=n(72),b=n(71),y=n.i(d.a)();l.default.component(u.a.name,u.a);for(var k in m.a)Object.defineProperty(l.default.prototype,"$"+k,{value:m.a[k]});Object.defineProperty(l.default.prototype,"$env",{value:g.a}),Object.defineProperty(l.default.prototype,"$config",{value:v.a}),n.i(x.a)(),n.i(b.a)(document,window),l.default.prototype.$autoPlay=function(e,t){p.a.methods.autoPlay(e,t)},l.default.mixin({data:function(){return{contentBScrollWrap:null}},methods:{initBScroll:function(){var e=this;return i()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){e.$nextTick(function(){if(e.$refs.contentBScrollWrap){var n=e.$route.fullPath,a=e.$store.state.appShell.historyPageScrollY[n]||0,r={fade:!0,interactive:!1},o={click:!0,startY:a,scrollbar:r};e.$route.meta.needPullUp&&(o.pullUpLoad={threshold:50}),e.$route.meta.needPullUp&&(o.pullDownRefresh={threshold:50,stop:20}),e.contentBScrollWrap=new w.a(e.$refs.contentBScrollWrap,o),t()}})}));case 1:case"end":return t.stop()}},t,e)}))()}},beforeRouteLeave:function(e,t,n){if(this.contentBScrollWrap){var a=this.contentBScrollWrap.y;this.$store.dispatch("appShell/saveScrollY",{path:t.fullPath,scrollY:a})}n()}}),new l.default({el:"#app",router:y,store:h.a,template:"<App/>",components:{App:p.a},render:function(e){return e(p.a)},created:function(){var e=this;return i()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$config.isWechat||!e.$checkIsWeixin()){t.next=6;break}return console.log("引入微信SDK"),t.next=4,e.$importWeixinSDK();case 4:return t.next=6,e.$wxConfig(location.href.split("#")[0]);case 6:case"end":return t.stop()}},t,e)}))()}})},81:function(e,t,n){"use strict";t.a=[{path:"/",redirect:"/list"},{path:"/list",name:"列表",component:function(e){n.e(0).then(function(){var t=[n(153)];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/detail",name:"详情",component:function(e){n.e(1).then(function(){var t=[n(152)];e.apply(null,t)}.bind(this)).catch(n.oe)}}]},82:function(e,t,n){"use strict";var a=n(65),r=(n.n(a),n(66)),o=n.n(r),i=n(11),s=n.n(i),c=n(10),u=n.n(c),l=n(42),f=n.n(l),p=n(21),d=n(20),h=n(90),m=n(45),g=new f.a,v=p.a.wechatAuthUrl||d.a.wechatAuthConfig.wechatAuthUrl||"",w=(v.indexOf("http://")>=0||v.indexOf("https://")>=0?v:p.a.host+v)+"?redirect="+encodeURIComponent(location.origin+location.pathname+location.hash)+"&app_id="+p.a.appID,x=p.a.authUrl||d.a.authUrl||"",b=""+(x.indexOf("http://")>=0||x.indexOf("http://")>=0?x:p.a.host+x);g.config.baseURL=p.a.host+p.a.baseURL,g.config.withCredentials=!0,g.interceptors.request.use(function(){var e=u()(s.a.mark(function e(t){var a,r,o,i,c,u,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("jwt"!==d.a.authenticator){e.next=23;break}if(!(d.a.jwtConfig.authWhiteList.indexOf(t.url)<0)){e.next=23;break}if(a=p.a.storageType||d.a.jwtConfig.storageType||"localStorage",r=p.a.token||d.a.jwtConfig.token||"token",o=p.a.tokenType||d.a.jwtConfig.tokenType||"tokenType",i=window[a].getItem(r),c=window[a].getItem(o),u=sessionStorage.getItem("code"),i){e.next=21;break}if(!d.a.isNeedWechatAuth||!u){e.next=18;break}return g.lock(),e.next=13,n.i(h.a)(u);case 13:return l=e.sent,sessionStorage.removeItem("code"),t.headers.Authorization=l.token_type+" "+l.access_token,g.unlock(),e.abrupt("return",t);case 18:return e.abrupt("return",t);case 21:return t.headers.Authorization=c+" "+i,e.abrupt("return",t);case 23:return e.abrupt("return",t);case 24:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),g.interceptors.response.use(function(){var e=u()(s.a.mark(function e(t,n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),function(){var e=u()(s.a.mark(function e(t,a){var r,i,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==t.status){e.next=9;break}return r=p.a.storageType||d.a.jwtConfig.storageType||"localStorage",i=p.a.token||d.a.jwtConfig.token||"token",c=window[r].getItem(i),c&&window[r].removeItem(i),d.a.isWechat&&d.a.isNeedWechatAuth?(window.addEventListener("hashchange",function(){console.log("hashchange in fetch",location.href);var e=n.i(m.a)();console.log("query",e),e.code&&location.reload()},!1),console.log("need location href to wxAuthUrl"),console.log(w),location.href=w):(console.log("need location href to loginPage"),location.href=b),e.abrupt("return",a.reject(t));case 9:if(404!==t.status&&500!==t.status&&400!==t.status){e.next=15;break}return console.error(t),o()("网络错误!"),e.abrupt("return",a.reject(t));case 15:if(429!==t.status){e.next=21;break}return console.log("request are too fast"),o()("您太快了,请稍后重试!"),e.abrupt("return",a.reject(t));case 21:if(403!==t.status){e.next=28;break}return console.log("forbidden request"),console.error(t),o()("您无权访问"),e.abrupt("return",a.reject(t));case 28:return e.abrupt("return",a.reject(t));case 29:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()),t.a=g},83:function(e,t,n){"use strict";function a(e){if("string"!=typeof e)return!1;try{var t=JSON.parse(e);return!("object"!==(void 0===t?"undefined":h()(t))||!t)}catch(t){return console.log("error："+e+"!!!"+t),!1}}var r=n(11),o=n.n(r),i=n(65),s=(n.n(i),n(66)),c=n.n(s),u=n(99),l=n.n(u),f=n(10),p=n.n(f),d=n(100),h=n.n(d),m=n(20),g=n(21),v=n(42),w=n.n(v);t.a={checkIsWeixin:function(){if(m.a.isWechat){return navigator.userAgent.toLowerCase().indexOf("micromessenger")>=0}},importWeixinSDK:function(){var e=document,t=e.createElement("script"),n=e.getElementsByTagName("script")[0];t.src="https://res.wx.qq.com/open/js/jweixin-1.4.0.js";var a=new Promise(function(e){t.addEventListener("load",function(){e()})});return n.parentNode.insertBefore(t,n),a},wxConfig:function(e){var t=this;return p()(o.a.mark(function n(){var r,i,s,u;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(m.a.isWechat&&t.$checkIsWeixin()){n.next=2;break}return n.abrupt("return");case 2:return r=new w.a,n.prev=3,i=g.a.wechatConfigUrl?g.a.wechatConfigUrl:m.a.wechatConfig.wechatConfigUrl||"",console.log(i),i.indexOf("http://")>=0||i.indexOf("https://")>=0?r.config.baseURL=i:r.config.baseURL=g.a.host,r.config.headers={"App-Id":g.a.appID},n.next=10,r.post(""+(i.indexOf("http://")>=0||i.indexOf("https://")>=0?"":i),{url:e,app_id:g.a.appID});case 10:s=n.sent,console.log("data: ",s.data),u="string"==typeof s.data?a(s.data)?JSON.parse(s.data):{}:s.data,console.log(u),u&&(wx.config({debug:!1,appId:u.appId,timestamp:u.timestamp,nonceStr:u.nonceStr,signature:u.signature,jsApiList:[].concat(l()(u.jsApiList))}),wx.error(function(e){c()("jssdk error:"+e.errMsg)})),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(3),console.log(n.t0);case 20:case"end":return n.stop()}},n,t,[[3,17]])}))()},setShare:function(e){if(m.a.isWechat&&this.$checkIsWeixin()){var t=e.title,n=void 0===t?"":t,a=e.desc,r=void 0===a?"":a,o=e.link,i=void 0===o?location.href:o,s=e.imgUrl,c=void 0===s?"":s,u=e.success,l=void 0===u?function(){}:u;wx.ready(function(){wx.onMenuShareAppMessage&&wx.onMenuShareAppMessage({title:n,desc:r,link:i,imgUrl:c,type:"",dataUrl:"",success:function(){l(),console.log("share success")},cancel:function(){console.log("share cancel")}}),wx.onMenuShareTimeline&&wx.onMenuShareTimeline({title:n,link:i,desc:r,imgUrl:c,success:function(){l(),console.log("share success")},cancel:function(){console.log("share cancel")}}),wx.updateAppMessageShareData&&wx.updateAppMessageShareData({title:n,desc:r,link:i,imgUrl:c,success:function(){console.log("update success")}}),wx.updateTimelineShareData&&wx.updateTimelineShareData({title:n,desc:r,link:i,imgUrl:c,success:function(){console.log("update success")}})})}},hideMenu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];m.a.isWechat&&this.$checkIsWeixin()&&wx.ready(function(){wx.hideMenuItems({menuList:e})})},banShare:function(){m.a.isWechat&&this.$checkIsWeixin()&&wx.ready(function(){wx.hideMenuItems({menuList:["menuItem:share:facebook","menuItem:share:email","menuItem:share:appMessage","menuItem:share:timeline","menuItem:share:qq","menuItem:share:weiboApp","menuItem:share:QZone"]})})}}},84:function(e,t,n){"use strict";t.a={}},85:function(e,t,n){"use strict";t.a={}},86:function(e,t,n){"use strict";var a,r=n(98),o=n.n(r),i=n(44),s={needPageTransition:!0,isPageSwitching:!1,pageTransitionName:"",historyPageScrollY:{}},c={enablePageTransition:function(e){(0,e.commit)(i.a,!0)},disablePageTransition:function(e){(0,e.commit)(i.b,!1)},setPageSwitching:function(e,t){(0,e.commit)(i.c,t)},saveScrollY:function(e,t){var n=e.commit,a=t.path,r=t.scrollY;n(i.d,{path:a,scrollY:r})}},u=(a={},o()(a,i.c,function(e,t){e.isPageSwitching=t}),o()(a,i.e,function(e,t){var n=t.pageTransitionName;e.pageTransitionName=n}),o()(a,i.d,function(e,t){var n=t.path,a=t.scrollY;e.historyPageScrollY[n]=a}),a);t.a={namespaced:!0,actions:c,mutations:u,state:s}},87:function(e,t,n){"use strict";var a={qrCode:"",banner:"",needSubscribe:!0,nickname:"",avatar:"",hasSubscribe:!0},r={setQrCode:function(e,t){e.qrCode=t},setBanner:function(e,t){e.banner=t},setNeedSubscribe:function(e,t){e.needSubscribe=t},setNickname:function(e,t){e.nickname=t},setAvatar:function(e,t){e.avatar=t},setHasSubscribe:function(e,t){e.hasSubscribe=t}};t.a={namespaced:!0,mutations:r,state:a}},88:function(e,t,n){"use strict";t.a={}},89:function(e,t,n){"use strict";t.a={}},90:function(e,t,n){"use strict";var a=n(11),r=n.n(a),o=n(10),i=n.n(o),s=n(42),c=n.n(s),u=n(21),l=n(20);t.a=function(){var e=i()(r.a.mark(function e(t){var n,a,o,i,s,f,p,d,h,m;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new c.a,n.config.baseURL=u.a.host+u.a.baseURL,n.config.withCredentials=!0,console.log(n.config),a=u.a.authUrl||l.a.authUrl||"",e.next=7,n.post(a,{code:t});case 7:return o=e.sent,i=o.data,s=i.access_token,f=i.token_type,p=i.expires_in,d=u.a.storageType||l.a.jwtConfig.storageType||"localStorage",h=u.a.token||l.a.jwtConfig.token||"token",m=u.a.tokenType||l.a.jwtConfig.tokenType||"tokenType",window[d].setItem(h,s),window[d].setItem(m,f),window[d].setItem("expires_in",p),e.abrupt("return",{access_token:s,token_type:f,expires_in:p});case 19:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},91:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(27),r=n.n(a),o=n(67),i=n(139);n.n(i);t.default={computed:r()({},n.i(o.b)("appShell",["pageTransitionName"])),mounted:function(){document.addEventListener("WeixinJSBridgeReady",this.play(),!1)},methods:r()({},n.i(o.c)("appShell",["setPageSwitching"]),{handleBeforeEnter:function(e){this.setPageSwitching(!0)},handleAfterEnter:function(e){this.setPageSwitching(!1)},autoPlay:function(e,t){var n=document.getElementById("music");n.addEventListener("ended",t,!1),n.src=e,n.load(),n.play()},play:function(){document.getElementById("music").load()}})}}},[80]);
//# sourceMappingURL=app.24b5326e95891d0030ae.js.map